<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Smart Diagonal Calculator</title>

<style>
* {
  box-sizing: border-box;
  font-family: "Segoe UI", Roboto, Arial, sans-serif;
}

body {
  background: linear-gradient(135deg, #e3f2fd, #f1f8e9);
  margin: 0;
  padding: 0;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  min-height: 100vh;
}

.container {
  background: #ffffff;
  width: 95%;
  max-width: 420px;
  margin-top: 25px;
  padding: 25px;
  border-radius: 16px;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
}

h1 {
  text-align: center;
  color: #1565c0;
  font-size: 22px;
  margin-bottom: 15px;
}

.top-image {
  width: 100%;
  border-radius: 12px;
  margin-bottom: 15px;
  border: 1px solid #ddd;
}

label {
  display: block;
  font-weight: 600;
  margin-bottom: 6px;
  color: #333;
  font-size: 14px;
}

input {
  width: 100%;
  padding: 10px 12px;
  margin-bottom: 15px;
  border: 1px solid #ccc;
  border-radius: 10px;
  font-size: 16px;
}

input:focus {
  border-color: #1e88e5;
  outline: none;
  box-shadow: 0 0 4px rgba(30, 136, 229, 0.4);
}

.angles {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.result-box {
  background-color: #f7f7f7;
  border-radius: 10px;
  padding: 15px;
  margin-top: 15px;
  text-align: center;
  font-size: 18px;
  font-weight: bold;
  color: #333;
  border: 1px solid #ddd;
}

footer {
  text-align: center;
  font-size: 12px;
  color: #777;
  margin-top: 15px;
}
</style>
</head>

<body>

<div class="container">
  <a href="index.html">üè† Home</a>

  <h1>Smart Diagonal Calculator</h1>

  <img src="angle-diagram.png" alt="Angle Diagram" class="top-image">

  <label>Height (mm)</label>
  <input type="number" id="height" value="1200">

  <label>Length (mm)</label>
  <input type="number" id="length" value="1200">

  <div class="angles">
    <div>
      <label>Angle A (¬∞)</label>
      <input type="number" id="angleA" min="0" max="90" step="0.01" placeholder="‚Äî">
    </div>
    <div>
      <label>Angle B (¬∞)</label>
      <input type="number" id="angleB" min="0" max="90" step="0.01" placeholder="‚Äî">
    </div>
  </div>

  <div class="result-box" id="diagonal">Diagonal: ‚Äî</div>

  <footer>All angles are in degrees (¬∞)</footer>
</div>

<script>
const height = document.getElementById("height");
const length = document.getElementById("length");
const angleA = document.getElementById("angleA");
const angleB = document.getElementById("angleB");
const diagonalBox = document.getElementById("diagonal");

let lock = false;

/* ---------- ANGLE VALIDATION ---------- */
function validateAngle(input) {
  let v = input.value;

  // Remove invalid characters
  v = v.replace(/[^0-9.]/g, "");

  // Allow only one decimal point
  if ((v.match(/\./g) || []).length > 1) {
    v = v.substring(0, v.length - 1);
  }

  let num = parseFloat(v);
  if (isNaN(num)) {
    input.value = "";
    return null;
  }

  // Clamp between 0 and 90
  num = Math.min(90, Math.max(0, num));

  // Limit to 2 decimal places
  input.value = num.toFixed(2);

  return num;
}

/* ---------- CALCULATIONS ---------- */
function updateFromHeight() {
  if (lock) return;
  lock = true;

  const H = parseFloat(height.value);
  const L = parseFloat(length.value);

  if (H > 0 && L > 0) {
    const diag = Math.sqrt(H * H + L * L);
    const A = Math.atan(H / L) * 180 / Math.PI;
    const B = 90 - A;

    diagonalBox.textContent = `Diagonal: ${diag.toFixed(2)} mm`;
    angleA.value = A.toFixed(2);
    angleB.value = B.toFixed(2);
  }

  lock = false;
}

function updateFromAngleA() {
  if (lock) return;
  lock = true;

  const A = validateAngle(angleA);
  const L = parseFloat(length.value);

  if (A !== null && L > 0) {
    const H = Math.tan(A * Math.PI / 180) * L;
    const diag = Math.sqrt(H * H + L * L);

    height.value = H.toFixed(2);
    angleB.value = (90 - A).toFixed(2);
    diagonalBox.textContent = `Diagonal: ${diag.toFixed(2)} mm`;
  }

  lock = false;
}

function updateFromAngleB() {
  if (lock) return;
  lock = true;

  const B = validateAngle(angleB);
  const L = parseFloat(length.value);

  if (B !== null && L > 0) {
    const A = 90 - B;
    const H = Math.tan(A * Math.PI / 180) * L;
    const diag = Math.sqrt(H * H + L * L);

    height.value = H.toFixed(2);
    angleA.value = A.toFixed(2);
    diagonalBox.textContent = `Diagonal: ${diag.toFixed(2)} mm`;
  }

  lock = false;
}

/* ---------- EVENTS ---------- */
height.addEventListener("input", updateFromHeight);
length.addEventListener("input", updateFromHeight);
angleA.addEventListener("input", updateFromAngleA);
angleB.addEventListener("input", updateFromAngleB);

/* ---------- SECURITY ---------- */
document.addEventListener("contextmenu", e => e.preventDefault());

updateFromHeight();
</script>

</body>
</html>
